<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Weather Map Project</title>
    <script src='https://api.mapbox.com/mapbox-gl-js/v1.10.0/mapbox-gl.js'></script>
    <link href='https://api.mapbox.com/mapbox-gl-js/v1.10.0/mapbox-gl.css' rel='stylesheet' />
    <style>

        * {
            box-sizing: border-box;
        }

        #forecastData {
            /*border: solid 1px black;*/
            /*border-radius: 10px;*/
            height: fit-content;
            /*width: 100px;*/
            width: fit-content;
            display: flex;
            flex-wrap: nowrap;
            justify-content: space-around;
            margin: 1rem;
        }

        .card {
            border: solid 3px black;
            border-radius: 10px;
            height: fit-content;
            width: fit-content;
            padding: .5rem;
            display: inline-flex;
            /*flex-wrap: nowrap;*/
            /*justify-content: center;*/
        }

    </style>


</head>
<body>

<header>
    <h2>Weather App</h2>
</header>

<div class="search-container">
    <form action="">
        <input type="text" placeholder="Search.." name="search">
        <button type="submit"><i class="fa fa-search"></i></button>
    </form>
</div>

<div id="bonusLater"></div>

<div id="forecastData">
    <div id="date"></div>
</div>

<div id="map" style="width: 100vw; height: 300px; align-content: space-around">

</div>


<script src="js/jquery-2.2.4.js"></script>â€‹
<script src="js/keys.js"></script>
<!--
MAPBOX UTILS
-->
<script src='https://api.tiles.mapbox.com/mapbox-gl-js/v0.53.0/mapbox-gl.js'></script>
<script src="js/mapbox-geocode.js"></script>
<script>
    "use strict";
    $(document).ready(function() {

    //MAPBOX ACCESS

        mapboxgl.accessToken = MAPBOX_KEY;
        var map = new mapboxgl.Map({
            container: 'map',
            style: 'mapbox://styles/mapbox/streets-v9',
            zoom: 11,
            center: [-98.4936, 29.4241]
        });

    //OPENWEATHER ACCESS VARIABLES

        var weatherUrl = 'https://api.openweathermap.org/data/2.5/onecall';
        var weatherOptions = {
            lat: 29.4241,
            lon: -98.4936,
            appid: OPEN_WEATHER_APPID,
            exclude: 'minutely, current, hourly',
            units: 'imperial'
        };



    //OPENWEATHER

        $.get(weatherUrl, weatherOptions).done(function (data) {
            console.log(data);
            var todayDate = new Date(data.daily[0].dt * 1000).toLocaleDateString();

                for(var i = 0; i <= 4; i++) {
                    $('#forecastData').append(
                        '<div class="card">' + todayDate + '<br>' + "Average Temperature" + '<br>' + data.daily[i].temp.day + '</div>'
                    );
                }
            });

    //MAP POSITIONING

        geocode({
            lat: 29.4241,
            lon: -98.4936
        }, MAPBOX_KEY).then(function(result) {
            console.log(result);
            map.setCenter(result);
            map.setZoom(10);
        });


        //option from a stu q
        //add after the vars
        // function parseDate(timestamp) {
        //     return new Date(timestamp * 1000).toLocaleDateString();
        // }


    // JS IFEE END
    });
</script>
</body>
</html>